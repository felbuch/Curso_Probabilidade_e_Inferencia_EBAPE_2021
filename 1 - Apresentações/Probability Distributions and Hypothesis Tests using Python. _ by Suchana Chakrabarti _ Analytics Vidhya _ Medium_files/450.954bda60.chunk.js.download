(self.webpackChunklite=self.webpackChunklite||[]).push([[450,3874],{85714:(e,t,n)=>{"use strict";n.d(t,{Lv:()=>d,v:()=>m,QX:()=>p});var r=n(28655),i=n.n(r),o=n(71439),a=n(67294),l=n(12291),c=n(85277);function s(){var e=i()(["\n  fragment SuspendedBannerLoader_post on Post {\n    id\n    isSuspended\n  }\n"]);return s=function(){return e},e}function u(){var e=i()(["\n  fragment SuspendedBannerLoader_user on User {\n    id\n    isSuspended\n  }\n"]);return u=function(){return e},e}var d=(0,l.$j)()((function(e){var t=e.dispatch,n=e.user,r=e.post;return a.useEffect((function(){n&&n.isSuspended?t((0,c.Dx)({duration:"NEXTPAGE",message:"",toastStyle:"USER_SUSPENDED"})):r&&r.isSuspended&&t((0,c.Dx)({duration:"NEXTPAGE",message:"",toastStyle:"POST_SUSPENDED",extraParams:{postId:(null==r?void 0:r.id)||""}}))}),[]),null})),m=(0,o.Ps)(u()),p=(0,o.Ps)(s())},93874:(e,t,n)=>{"use strict";n.d(t,{h:()=>le,k:()=>ce});var r,i=n(28655),o=n.n(i),a=n(63038),l=n.n(a),c=n(71439),s=n(67294),u=n(42963),d=n(46829),m=n(58875),p=n.n(m),g=n(76532),f=n(42933),h=n(82318),v=n(98024),E=n(95760),b=n(6688),y=n(79208),S=n(90038),P=function(e){return{backgroundColor:e.baseColor.background.light,borderColor:e.baseColor.border.light,borderRadius:"3px",borderWidth:"1px",alignItems:"center",padding:"25px 20px 25px 20px",marginTop:"",borderStyle:"solid"}},x=function(){var e=(0,b.I)();return s.createElement("div",{className:e([O,P])},s.createElement(f.x,{textAlign:"center"},s.createElement(f.x,null,"1000 x 1000"),s.createElement(f.x,null,"pixels")))},I=function(){return s.createElement(f.x,{marginRight:"5px",display:"inline-block"},s.createElement(v.F,{scale:"S",color:"ERROR"},"That file doesn't meet our requirements. Try another."))},w=function(){return s.createElement(f.x,{marginTop:"8px"},s.createElement(f.x,{marginRight:"5px",display:"inline-block"},s.createElement(v.F,{scale:"S",color:"ERROR"},"We couldn't process your request.")),s.createElement(f.x,{marginRight:"5px",display:"inline-block"},s.createElement(v.F,{scale:"S"},"Try again, or"," ",s.createElement(h.r,{inline:!0,linkStyle:"OBVIOUS",href:"https://help.medium.com/hc/en-us"},"search our help center for support."))))};!function(e){e.Success="success",e.UploadError="uploadError",e.InvalidError="invalidError"}(r||(r={}));var O={height:"132px",width:"132px",display:"flex",flexDirection:"row",justifyContent:"center"},D=function(e){var t=e.setImageId,n=e.initialImageId,i=e.source,o=(0,b.I)(),a=(0,E.Av)(),c=(0,g.H)().value,u=s.useState({imageId:n,imageWidth:0,imageHeight:0}),d=l()(u,2),m=d[0],p=d[1],v=s.useState(null),P=l()(v,2),D=P[0],_=P[1],T=function(e){_(e),a.event("user.updateAvatarResult",{userId:null==c?void 0:c.id,source:i,uploadResult:e})},A=(0,y.JA)((function(e,n,i){var o=n.height,a=n.width,l=e.value.fileId;p({imageId:l,imageHeight:o,imageWidth:a}),o<parseInt("1000px",10)||a<parseInt("1000px",10)?(T(r.InvalidError),R()):(t(l),T(r.Success),i())}),(function(){T(r.UploadError)}),(function(){T(r.InvalidError)})),C=A.inputRef,L=A.fireClick,k=function(){a.event("user.updateAvatarClick",{userId:null==c?void 0:c.id,source:i,hasImage:!!m.imageId}),L()},R=function(){p({imageId:"",imageWidth:0,imageHeight:0}),t("")},M=s.useCallback((function(){return s.createElement(f.x,{marginBottom:"10px"},s.createElement("input",{type:"file","aria-hidden":"true",ref:C,className:o({display:"none"})}),s.createElement(h.r,{inline:!0,linkStyle:"OBVIOUS",onClick:k},"Add photo"))}),[o,k,C]),B=s.useCallback((function(){return s.createElement("div",{className:o([O])},s.createElement("div",{className:o((function(){return{backgroundImage:"url(".concat((0,S.W6)({miroId:m.imageId||"",width:m.imageWidth||0,height:m.imageHeight||0}),")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",height:"100%",width:"100%",borderRadius:"3px",display:"flex",flexDirection:"row"}}))}))}),[o,m]),U=s.useCallback((function(){return s.createElement(f.x,{display:"inline-block",marginBottom:"15px"},m.imageId?s.createElement(B,null):s.createElement(x,null))}),[m]);return s.createElement(f.x,{display:"flex",flexDirection:"column",maxWidth:"132px"},s.createElement(f.x,{display:"inline-block",float:"right"},s.createElement(U,null)),s.createElement(M,null),D===r.UploadError&&s.createElement(w,null),D===r.InvalidError&&s.createElement(I,null))},_=n(43791),T=function(e){var t=e.label,n=e.onChangeFn,r=e.onBlurFn,i=e.value,o=e.errorMessage,a=e.characterCountLimit;return s.createElement(s.Fragment,null,s.createElement(f.x,{marginBottom:"15px",textAlign:"left"},s.createElement(v.F,{scale:"L",tag:"h4"},t)),s.createElement(_.n,{scale:"L",onChange:n,value:i,errorMessage:o,onBlur:r,ariaLabel:t,characterCountLimit:a}))},A=n(92528),C=n(29035);function L(){var e=o()(["\n  mutation userCompleteProfileMutation(\n    $userId: ID!\n    $name: String!\n    $bio: String!\n    $imageId: String!\n  ) {\n    userCompleteProfile(userId: $userId, name: $name, bio: $bio, imageId: $imageId)\n  }\n"]);return L=function(){return e},e}function k(){var e=o()(["\n  fragment UserCompleteProfileDialog_user on User {\n    id\n    name\n    bio\n    imageId\n    hasCompletedProfile\n  }\n"]);return k=function(){return e},e}var R={min:3,max:50,message:"Please try another name that’s between 3 and 50 characters."},M={min:10,max:160,message:"Please try another description that’s between 10 and 160 characters."},B=function(e,t){var n=e.min,r=e.max,i=e.message;return function(e){var o=e.target.value;t(o.length<n||o.length>r?i:void 0)}},U=function(e){var t=(0,g.H)().value;return{shouldShowDialog:p().canUseDOM&&!(0,C.ic)(navigator.userAgent)&&(null==t?void 0:t.id)===e.id}},j=function(e){var t=e.setHasCompletedProfile,n=e.user,r=(0,E.Av)(),i=(0,g.H)().value,o=s.useState(!1),a=l()(o,2),c=a[0],u=a[1],d=F(),m=l()(d,1)[0],p=s.useState((null==n?void 0:n.imageId)||""),h=l()(p,2),b=h[0],y=h[1],S=s.useState((null==n?void 0:n.name)||""),P=l()(S,2),x=P[0],I=P[1],w=s.useState((null==n?void 0:n.bio)||""),O=l()(w,2),_=O[0],C=O[1],L=s.useState(),k=l()(L,2),j=k[0],N=k[1],H=s.useState(),W=l()(H,2),V=W[0],G=W[1],Y=B(R,N),z=B(M,G),$=s.useCallback((function(){i&&(u(!0),r.event("user.completedProfile",{userId:i.id,changedName:(null==n?void 0:n.name)!==x,changedBio:(null==n?void 0:n.bio)!==_,changedImage:(null==n?void 0:n.imageId)!==b,hasName:!!x,hasBio:!!_,hasImage:!!b}),m({variables:{userId:i.id,name:x,bio:_,imageId:b}}).then((function(){u(!1),t(!0)})))}),[i,m,u,n,x,_,b]),X=U(n).shouldShowDialog;return s.useEffect((function(){X&&r.event("user.presentedCompleteProfileDialog",{userId:null==i?void 0:i.id})}),[X]),X?s.createElement(s.Fragment,null,s.createElement(A.Q,{confirmText:"Continue",titleText:"Complete your profile",isDestructiveAction:!1,onConfirm:$,isVisible:!0,hide:function(){},withCloseButton:!1,showCancelButton:!1,disableConfirm:c},s.createElement(v.F,{scale:"L",color:"DARKER"},"Readers like learning a bit more about their writers"),s.createElement(f.x,{marginTop:"48px",marginBottom:"28px",display:"flex",flexDirection:"row"},s.createElement(f.x,{overflow:"visible",maxHeight:"200px"},s.createElement(D,{setImageId:y,initialImageId:b,source:"userCompleteProfileDialog"})),s.createElement(f.x,{marginLeft:"48px",textAlign:"left"},s.createElement(f.x,{key:"name"},s.createElement(T,{label:"Full name",onChangeFn:function(e){return I(e.target.value)},onBlurFn:Y,value:x,errorMessage:j})),s.createElement(f.x,{key:"bio",marginTop:"40px"},s.createElement(T,{label:"Bio (optional, max 160 characters)",onChangeFn:function(e){return C(e.target.value)},onBlurFn:z,value:_,errorMessage:V,characterCountLimit:160})))))):null},N=(0,c.Ps)(k()),F=function(){return(0,d.useMutation)(H)},H=(0,c.Ps)(L()),W=n(23279),V=n.n(W),G=n(55099),Y=n(67297),z=n(51064),$=n(27952);function X(){var e=o()(["\n  query userDomainValidityQuery($domain: String!) {\n    userDomainValidity(domain: $domain)\n  }\n"]);return X=function(){return e},e}function q(){var e=o()(["\n  mutation createUserDomainMutation($domain: String!) {\n    userDomainLink(domain: $domain) {\n      __typename\n      ... on CustomDomainFailure {\n        reason\n      }\n    }\n  }\n"]);return q=function(){return e},e}function Q(){var e=o()(["\n  fragment UserSubdomainOnboardingDialog_user on User {\n    id\n    customDomainState {\n      pending {\n        status\n      }\n      live {\n        status\n      }\n    }\n    username\n  }\n"]);return Q=function(){return e},e}var K=function(e){var t,n,r=e.user,i=e.isVisible,o=e.hide,a=e.redirectTo,c=e.redirectOnHide,u=void 0!==c&&c,d=e.refreshOnHide,m=void 0!==d&&d,h=(0,b.I)(),y=(0,E.Av)(),S=(0,g.H)().value,P=null!=S&&S.username?function(e){return e.toLowerCase().replace(/[_.]/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-/,"").replace(/-$/,"")}(S.username):"",x=s.useState(P),I=l()(x,2),w=I[0],O=I[1],D=(0,z.O)(!1),T=l()(D,3),C=T[0],L=T[1],k=T[2],R=s.useState(!1),M=l()(R,2),B=M[0],U=M[1],j=s.useState(!1),N=l()(j,2),F=N[0],H=N[1],W=re(w),X=ie(w),q=s.useState(null),Q=l()(q,2),K=Q[0],J=Q[1],ee=(0,Y.v9)((function(e){return e.config.productName})),ne=Z(),oe=l()(ne,1)[0],ae=te(W),le=ae.isValidityLoading,ce=ae.validityResult,se=ae.checkValidity,ue=s.useCallback(V()((function(e){se(e),U(!1)}),500),[]),de=s.useCallback((function(e){var t=e.target.value;B||U(!0),J(null),ue({domain:t}),O(t)}),[se,B]),me=s.useCallback((function(){H(!0),y.event("user.claimedSubdomain",{userId:null==S?void 0:S.id,source:"subdomain_dialog",changedUsername:(null==S?void 0:S.username)!==w}),oe({variables:{domain:W}}).then((function(e){var t,n,r,i,a="Something went wrong. Please try again with a different name.";if("CustomDomain"===(null===(t=e.data)||void 0===t||null===(n=t.userDomainLink)||void 0===n?void 0:n.__typename))L(),o();else if("CustomDomainFailure"===(null===(r=e.data)||void 0===r||null===(i=r.userDomainLink)||void 0===i?void 0:i.__typename)){var l=e.data.userDomainLink.reason||a;J(l)}else J(a);H(!1)}))}),[oe,y,S,W,w]),pe=s.useCallback((function(){u&&a(X),k(),m&&window.location.reload()}),[X,u,m]),ge=!(null==r||null===(t=r.customDomainState)||void 0===t||!t.pending)||!(null==r||null===(n=r.customDomainState)||void 0===n||!n.live),fe=!!S&&r.id===S.id&&!ge&&p().canUseDOM;if(s.useEffect((function(){i&&fe&&y.event("user.presentedClaimSubdomainDialog",{userId:null==S?void 0:S.id})}),[i,fe]),!fe)return null;var he=!B&&!le&&(null==ce?void 0:ce.userDomainValidity);return s.createElement(s.Fragment,null,s.createElement(A.Q,{confirmText:"Claim URL",titleText:"Claim your ".concat(ee," URL"),isDestructiveAction:!1,onConfirm:me,isVisible:i,hide:o,withCloseButton:!1,showCancelButton:!1,secondaryButton:s.createElement(G.z,{href:(0,$.mcw)(),size:"REGULAR"},"Learn More"),hideOnConfirm:!1,disableConfirm:F||!!K||!he},"All your stories show up on your profile, and it now comes with a personalized URL. The name you pick below will also be your username on ",ee,".",s.createElement(f.x,{marginBottom:"14px",marginTop:"32px",display:"flex",flexDirection:"column"},s.createElement(_.n,{ariaLabel:"Profile domain",onChange:de,value:w,errorMessage:null!=K?K:void 0,hideErrorIcon:!0}),!K&&s.createElement(f.x,{display:"inline-block",marginTop:"8px"},s.createElement("table",{className:h({display:"table",marginLeft:"auto",marginRight:"auto",textAlign:"left",borderSpacing:"4px",tableLayout:"fixed",maxWidth:"100%"})},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:h({paddingRight:"4px",verticalAlign:"top"})},s.createElement(v.F,{color:"LIGHTER",scale:"M",tag:"h4"},s.createElement("strong",null,"URL"))),s.createElement("td",null,s.createElement(v.F,{color:"LIGHTER",scale:"M"},W))),s.createElement("tr",null,s.createElement("td",{className:h({paddingRight:"4px",verticalAlign:"top"})},s.createElement(v.F,{color:"LIGHTER",scale:"M",tag:"h4"},s.createElement("strong",null,"Username"))),s.createElement("td",{className:h({marginBottom:"12px",marginTop:"10px"})},s.createElement(v.F,{color:"LIGHTER",scale:"M"},"@",w))),s.createElement("tr",null,s.createElement("td",null),s.createElement("td",{className:h({visibility:w===r.username?"hidden":"visible"})},s.createElement(v.F,{color:"LIGHTER",scale:"M"},"@",r.username," will no longer be valid")))))))),s.createElement(A.Q,{confirmText:"Done",titleText:"You're all set.",isDestructiveAction:!1,onConfirm:function(){},isVisible:C,hide:pe,withCloseButton:!1,showCancelButton:!1},"Your profile is now available at your ",ee," URL.",s.createElement(f.x,null,s.createElement(f.x,{display:"inline-block",marginTop:"28px"},s.createElement("table",{className:h({display:"table",marginLeft:"auto",marginRight:"auto",textAlign:"left",tableLayout:"fixed",maxWidth:"100%"})},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{className:h({marginBottom:"12px",paddingRight:"8px",verticalAlign:"top"})},s.createElement(v.F,{color:"LIGHTER",scale:"M",tag:"h4"},s.createElement("strong",null,"URL"))),s.createElement("td",null,s.createElement(v.F,{color:"LIGHTER",scale:"M",tag:"h4"},W))),s.createElement("tr",{className:h({paddingTop:"8px"})},s.createElement("td",{className:h({paddingRight:"8px",verticalAlign:"top"})},s.createElement(v.F,{color:"LIGHTER",scale:"M",tag:"h4"},s.createElement("strong",null,"Username"))),s.createElement("td",{className:h({marginBottom:"12px"})},s.createElement(v.F,{color:"LIGHTER",scale:"M",tag:"h4"},"@",w)))))))))},J=(0,c.Ps)(Q()),Z=function(){return(0,d.useMutation)(ee)},ee=(0,c.Ps)(q()),te=function(e){var t=(0,d.useQuery)(ne,{variables:{domain:e},ssr:!1});return{isValidityLoading:t.loading,validityResult:t.data,checkValidity:t.refetch}},ne=(0,c.Ps)(X()),re=function(e){var t=(0,Y.v9)((function(e){return e.config.authDomain})).split(":")[0];return"".concat(e,".").concat(t)},ie=function(e){var t=(0,Y.v9)((function(e){return e.config.authDomain}));return"https://".concat(e,".").concat(t)},oe=n(8403);function ae(){var e=o()(["\n  fragment UserSubdomainFlow_user on User {\n    id\n    hasCompletedProfile\n    name\n    bio\n    imageId\n    ...UserCompleteProfileDialog_user\n    ...UserSubdomainOnboardingDialog_user\n  }\n  ","\n  ","\n"]);return ae=function(){return e},e}var le=function(e){var t=e.user,n=e.redirectOnComplete,r=void 0!==n&&n,i=e.refreshOnComplete,o=void 0!==i&&i,a=e.forceVisible,c=void 0!==a&&a,d="true"===(0,oe.Wd)("showDomainSetup")||c,m=(0,z.O)(d),p=l()(m,3),g=p[0],f=p[2],h=s.useState(t.hasCompletedProfile),v=l()(h,2),E=v[0],b=v[1],y=s.useState(null),S=l()(y,2),P=S[0],x=S[1],I=U(t).shouldShowDialog&&!E&&(!t.name||!t.bio||!t.imageId);return P?s.createElement(u.l,{to:P,replace:!0}):s.createElement(s.Fragment,null,s.createElement(K,{isVisible:g&&!I,hide:c?function(){}:f,user:t,redirectTo:x,redirectOnHide:r,refreshOnHide:o}),g&&I?s.createElement(j,{user:t,setHasCompletedProfile:b}):null)},ce=(0,c.Ps)(ae(),N,J)},80450:(e,t,n)=>{"use strict";n.d(t,{gc:()=>pn,De:()=>fn,m6:()=>hn});var r=n(28655),i=n.n(r),o=n(67154),a=n.n(o),l=n(59713),c=n.n(l),s=n(63038),u=n.n(s),d=n(71439),m=n(67294),p=n(12291),g=n(28859),f=n(68254),h=n.n(f);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=(0,p.$j)((function(e){return{googleAnalyticsCode:e.config.googleAnalyticsCode}}))((function(e){var t=e.googleAnalyticsCode,n=e.collectionGoogleAnalyticsId,r=n?{trackCollectionPageview:{on:"visible",request:"pageview",vars:{account:n}}}:{},i={triggers:E(E({},{trackPageview:{on:"visible",request:"pageview",vars:{account:t}}}),r)},o={__html:'<script type="application/json">'.concat(h()(i,{isJSON:!0}),"<\/script>")};return m.createElement("amp-analytics",{type:"googleanalytics",id:"google-analytics",dangerouslySetInnerHTML:o})})),y=n(17305),S=n(45113),P=n(9972),x=n(11334),I=n(94132),w=n(26463),O=n(62872),D=n(87508),_=n(46829),T=n(76532);function A(){var e=i()(["\n  mutation AddCollaboratorMutation($postId: ID!) {\n    addCollaborator(postId: $postId)\n  }\n"]);return A=function(){return e},e}function C(){var e=i()(["\n  fragment AddCollaborator_post on Post {\n    isPublished\n    id\n  }\n"]);return C=function(){return e},e}var L=(0,d.Ps)(C()),k=(0,d.Ps)(A()),R=n(47578),M=n(42963),B=n(73891),U=n(67297),j=n(27952);function N(){var e=i()(["\n  fragment MaybeRedirectToEditor_post on Post {\n    id\n    isPublished\n    collection {\n      id\n    }\n    creator {\n      id\n    }\n  }\n"]);return N=function(){return e},e}var F=function(e){var t=e.children,n=e.post,r=(0,U.v9)((function(e){return e.config.authDomain})),i=(0,T.H)().value,o=n.collection,a=n.creator&&i&&n.creator.id===i.id,l=(0,B.g)(null==o?void 0:o.id).viewerEdge;return!n.isPublished&&(!o&&a||a&&null!=l&&l.canEditOwnPosts||null!=l&&l.isEditor||null!=l&&l.canEditPosts)?m.createElement(M.l,{to:(0,j.d0A)(r,n.id)}):m.createElement(m.Fragment,null,t)},H=(0,d.Ps)(N()),W=n(66371),V=n(55253),G=n(70405),Y=n(319),z=n.n(Y),$=n(82492),X=n.n($),q=n(90038),Q=n(96879),K=n(22744);function J(){var e=i()(["\n  fragment PostJsonLd_post on Post {\n    id\n    title\n    seoTitle\n    mediumUrl\n    creator {\n      name\n      username\n      ...userUrl_user\n    }\n    collection {\n      id\n      name\n      domain\n      slug\n      logo {\n        id\n        originalWidth\n        originalHeight\n      }\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalWidth\n      originalHeight\n    }\n    isLocked\n    firstPublishedAt\n    updatedAt\n    isShortform\n    shortformType\n    structuredData\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n"]);return J=function(){return e},e}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=e.id,n=e.originalWidth,r=e.originalHeight;if(!t||!n||!r)return null;var i=Math.min(r,60),o=i/r,a=Math.floor(n*o);return ne({width:a,height:i,url:(0,q.W6)({miroId:t,width:a,freezeGifs:!0,strategy:q._S.Resample})})}function ne(e){return ee({"@type":"ImageObject"},e)}var re=(0,p.$j)((function(e){var t=e.config,n=t.productName,r=t.defaultImages,i=t.collectionStructuredData,o=e.navigation;return{currentLocation:o.currentLocation,host:o.host,productName:n,defaultImages:r,collectionStructuredData:i}}))((function(e){var t=e.currentLocation,n=e.host,r=e.post,i=e.postDescription,o=e.productName,a=e.defaultImages,l=e.collectionStructuredData,c=r.collection,s=r.creator,u=r.id,d=r.mediumUrl,p=r.isLocked,g=r.previewImage,f=r.firstPublishedAt,v=r.updatedAt,E=r.structuredData,b=(0,K._t)(r,o),y={id:a.postLogo.imageId,originalWidth:a.postLogo.width,originalHeight:a.postLogo.height},S={id:a.orgLogo.imageId,originalWidth:a.orgLogo.width,originalHeight:a.orgLogo.height},P=c?{"@type":"Organization",name:c.name,url:c.domain||(0,Q.l1)(n,(0,j.WGd)(c,t)),logo:function(e){if(!e||!e.logo||!e.logo.id)return te(S);var t=te(e.logo);return t&&60===t.height&&t.width<=600?t:te(S)}(c)}:{"@type":"Organization",name:o,url:(0,Q.l1)(n,"/"),logo:te(S)};c&&l&&l[c.id]&&X()(P,l[c.id].data);var x=i||"",I=p?{isAccessibleForFree:"False",hasPart:{"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:".meteredContent"}}:{},w={"@context":"http://schema.org"},O=ee({"@type":"NewsArticle",image:g&&g.id?function(e){var t=e.id,n=e.originalWidth,r=e.originalHeight,i=e.focusPercentX,o=e.focusPercentY;if(!t)return null;var a=1200,l=(0,q.vz)({miroId:t,aspectRatio:16/9,croppedWidth:a,originalWidth:n,originalHeight:r,focusPercentX:i,focusPercentY:o}),c=(0,q.vz)({miroId:t,aspectRatio:4/3,croppedWidth:a,originalWidth:n,originalHeight:r,focusPercentX:i,focusPercentY:o}),s=(0,q.vz)({miroId:t,aspectRatio:1,croppedWidth:a,originalWidth:n,originalHeight:r,focusPercentX:i,focusPercentY:o}),u=new Set([l,c,s]);return Array.from(u)}(g):ne({url:(0,q.W6)({miroId:y.id,width:y.originalWidth}),height:y.originalHeight,width:y.originalWidth}),url:d,dateCreated:f&&new Date(f).toISOString(),datePublished:f&&new Date(f).toISOString(),dateModified:v&&new Date(v).toISOString(),headline:b,name:b,description:x,identifier:u,author:s&&s.name&&s.username?{"@type":"Person",name:s.name||s.username,url:(0,j.AWr)(s,n)}:null,creator:s&&[s.name],publisher:P,mainEntityOfPage:d},I),D=ee(ee({},w),O);if(E&&E.length>0)try{var _=JSON.parse(E);if(_&&null!=_&&_["@graph"]&&(null==_?void 0:_["@graph"].length)>0){var T=((null==_?void 0:_["@graph"])||[]).filter((function(e){return(null==e?void 0:e["@type"])&&"NewsArticle"!==(null==e?void 0:e["@type"])}));T&&T.length>0&&(D=ee(ee({},w),{},{"@graph":[O].concat(z()(T))}))}}catch(e){}return m.createElement(G.q,null,m.createElement("script",{type:"application/ld+json"},h()(D,{isJSON:!0})))})),ie=(0,d.Ps)(J(),K.bq,j.$mN),oe=n(27390),ae=n(71794);function le(){var e=i()(["\n  fragment PostMetadata_post on Post {\n    id\n    socialTitle\n    socialDek\n    noIndex\n    curationStatus\n    canonicalUrl\n    mediumUrl\n    metaDescription\n    latestPublishedAt\n    visibility\n    isLimitedState\n    readingTime\n    creator {\n      name\n      twitterScreenName\n      ...userUrl_user\n    }\n    collection {\n      ampEnabled\n      twitterUsername\n      facebookPageId\n    }\n    previewContent {\n      subtitle\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalHeight\n      originalWidth\n    }\n    isShortform\n    noIndex\n    curationStatus\n    ...PostJsonLd_post\n    ...postMetaDescription_post\n    ...shortformPostMetaDescription_post\n    ...shouldIndexPost_post\n    ...shortformPostTitle_post\n    ...getTitleDetails_post\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return le=function(){return e},e}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=(0,p.$j)((function(e){return{authDomain:e.config.authDomain,host:e.navigation.host,productName:e.config.productName}}))((function(e){var t,n,r=e.isAmp,i=e.host,o=e.authDomain,a=e.productName,l=e.post,c=l.canonicalUrl,s=l.collection,u=l.creator,d=l.id,p=l.latestPublishedAt,g=l.mediumUrl,f=l.previewContent,h=l.socialTitle,v=l.socialDek,E=l.visibility,b=l.isShortform,y=s&&s.ampEnabled,S=u&&u.name,P=(0,K.yB)(l),x=l.title||"",I=P.latestTitle||x;if(b){var w=se(se({},l),{},{title:I});t=(0,K.oS)(w,a,P.hasTitleGraf).trim(),n=(0,ae.OO)(l,P.hasTitleGraf)}else t=(0,K._t)(l,a,P,!0).trim(),n=(0,ae.j7)(l);var O,D,_=v||f&&f.subtitle||n;if(l&&l.previewImage&&l.previewImage.id&&!l.isLimitedState){var T=l.previewImage;O=(0,q.vz)({miroId:T.id,aspectRatio:1.9,croppedWidth:T.originalWidth?Math.min(T.originalWidth,1200):1200,originalWidth:T.originalWidth,originalHeight:T.originalHeight,focusPercentX:T.focusPercentX,focusPercentY:T.focusPercentY})}else if(l.isLimitedState){var A={id:"1*3SjgcTt7wCYYS10ff6-0JQ.png",originalWidth:748,originalHeight:390,focusPercentX:50,focusPercentY:40};O=(0,q.vz)({miroId:A.id,aspectRatio:1.9,croppedWidth:A.originalWidth?Math.min(A.originalWidth,1200):1200,originalWidth:A.originalWidth,originalHeight:A.originalHeight,focusPercentX:A.focusPercentX,focusPercentY:A.focusPercentY})}u&&u.username&&(D=(0,j.AWr)(u,o));var C=(0,j.CK_)(d),L=!(0,K.c_)(l),k=p&&new Date(p).toISOString(),R=(0,oe.Vd)(l.readingTime||0),M=u&&u.twitterScreenName,B=s&&s.twitterUsername||"Medium",U=s&&s.facebookPageId,N=h||x||I;l.isLimitedState&&(N="");var F=l.isLimitedState?"":_,H=m.useMemo((function(){var e;return m.createElement(G.q,{htmlAttributes:r?{amp:void 0}:{}},m.createElement("meta",{property:"og:type",content:"article"}),k&&m.createElement("meta",{property:"article:published_time",content:k}),y&&!r?m.createElement("link",{rel:"amphtml",href:(0,j.VcI)(i,d)}):null,m.createElement("title",null,t),m.createElement("meta",{name:"title",content:t}),m.createElement("meta",{property:"og:title",content:N}),m.createElement("meta",{property:"twitter:title",content:N}),U&&m.createElement("meta",{property:"fb:pages",content:U}),m.createElement("meta",{name:"twitter:site",content:"@".concat(B)}),m.createElement("meta",{name:"twitter:app:url:iphone",content:C}),m.createElement("meta",{property:"al:android:url",content:C}),m.createElement("meta",{property:"al:ios:url",content:C}),m.createElement("meta",{property:"al:android:app_name",content:"Medium"}),n&&m.createElement("meta",{name:"description",content:n}),_&&m.createElement("meta",{property:"og:description",content:F}),_&&m.createElement("meta",{property:"twitter:description",content:F}),m.createElement("meta",{property:"og:url",content:null!=g?g:void 0}),m.createElement("meta",{property:"al:web:url",content:null!=g?g:void 0}),O&&m.createElement("meta",{property:"og:image",content:O}),O&&m.createElement("meta",{name:"twitter:image:src",content:O}),m.createElement("meta",{name:"twitter:card",content:O?"summary_large_image":"summary"}),D&&m.createElement("meta",{property:"article:author",content:D}),D&&m.createElement("link",{rel:"author",href:D}),M&&m.createElement("meta",{name:"twitter:creator",content:"@".concat(M)}),S&&m.createElement("meta",{name:"author",content:S}),m.createElement("link",{rel:"canonical",href:null!==(e=c||g)&&void 0!==e?e:void 0}),m.createElement("link",{rel:"alternate",href:(0,j.zix)((0,j.o2w)("medium.com",l.id))}),m.createElement("meta",{name:"robots",content:"".concat(L?"noindex":"index",",follow,max-image-preview:large")}),m.createElement("meta",{name:"referrer",content:"UNLISTED"!==E?"unsafe-url":"origin"}),r?null:m.createElement("meta",{name:"twitter:label1",content:"Reading time"}),r?null:m.createElement("meta",{name:"twitter:data1",content:"".concat(R," min read")}))}),[r,t,c,g,O,y,d,h,n,D,S,M,C,L,k]);return m.createElement(m.Fragment,null,H,m.createElement(re,{post:l,postDescription:n}))})),de=(0,d.Ps)(le(),ie,ae.iI,ae.m3,K.HF,K.Pz,K.dm,K.bq,j.$mN),me=n(80439),pe=n(89423),ge=n(1932),fe=n(51607),he=n(42933),ve=n(82318),Ee=n(55099),be=n(77284),ye=n(3149),Se=n(98024),Pe=n(17614),xe=n(27108),Ie=n(14391),we=n(85277),Oe=n(8403),De=n(67122),_e=n(76579);function Te(){var e=i()(["\n  fragment PostPublishedDialog_prerequisite_post on Post {\n    id\n    creator {\n      id\n    }\n    collection {\n      id\n    }\n  }\n"]);return Te=function(){return e},e}function Ae(){var e=i()(["\n  query PostPublishedDialogQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...PostPublishedDialog_post\n    }\n  }\n  ","\n"]);return Ae=function(){return e},e}function Ce(){var e=i()(["\n  fragment PostPublishedDialog_post on Post {\n    id\n    inResponseToPostResult {\n      __typename\n    }\n    visibility\n    curationEligibleAt\n    mediumUrl\n    ...ShareButton_post\n    isNewsletter\n    isPublishToEmail\n    creator {\n      id\n    }\n    isMarkedPaywallOnly\n  }\n  ","\n"]);return Ce=function(){return e},e}var Le=function(){return m.createElement(he.x,null,m.createElement(ve.r,{inline:!0,linkStyle:"OBVIOUS",href:(0,j.Scj)()},"Learn more")," ","about what happens to your post when you publish.")};var ke,Re=(0,d.Ps)(Ce(),fe.M),Me=(0,d.Ps)(Ae(),Re),Be=function(e){var t=e.url,n=e.label;return m.createElement(_e.b,{url:t},(function(e){return m.createElement(he.x,{marginBottom:"8px"},m.createElement(Ee.z,{buttonStyle:"SOCIAL",size:"REGULAR",width:"212px",onClick:function(e){return e}},m.createElement(he.x,{display:"flex",alignItems:"center",justifyContent:"center"},e?"Copied!":n)))}))},Ue=function(e){var t=e.post,n=e.isUnlisted,r=e.postPath;return m.createElement(he.x,{display:"flex",flexDirection:"column",alignItems:"center"},m.createElement(Se.F,{color:"DARKER",scale:"L"},function(e){return e?"Share your story outside Medium.":"Share your story with the world."}(n)),m.createElement(he.x,{marginTop:"20px"},!n&&m.createElement(m.Fragment,null,m.createElement(he.x,{marginBottom:"8px"},m.createElement(fe.T,{socialPlatform:"FACEBOOK",buttonStyle:"BUTTON_BRANDED",post:t})),m.createElement(he.x,{marginBottom:"8px"},m.createElement(fe.T,{socialPlatform:"TWITTER",buttonStyle:"BUTTON_BRANDED",post:t})),m.createElement(he.x,{marginBottom:"8px"},m.createElement(fe.T,{socialPlatform:"LINKEDIN",buttonStyle:"BUTTON_BRANDED",post:t}))),m.createElement(Be,{url:r,label:"Copy story link"})))},je=function(e){var t=e.viewerId,n=e.isVisible,r=e.hide,i=e.post,o=i.id,a=i.visibility,l=i.curationEligibleAt,c=i.mediumUrl,s=i.isNewsletter,u=i.isPublishToEmail,d=i.isMarkedPaywallOnly,p=i.creator,g=(0,ge.T)(o),f=g.viewerEdge,h=g.loading,v="UNLISTED"===a,E=!!l,b=(null==f?void 0:f.creatorPartnerProgramEnrollmentStatus)===Ie.iR.ENROLLED,y=null==f?void 0:f.shareKey,S=(0,U.v9)((function(e){return e.config.productName})),P="Your story is published!";return u&&t===(null==p?void 0:p.id)?P="Your story has been published and sent!":s&&(P="Your newsletter is on its way!"),h?null:m.createElement(be.V,{isVisible:n,hide:r,withAnimation:!0,withCloseButton:!1},m.createElement(he.x,{background:De.ix,borderRadius:"4px",boxShadow:"0 2px 10px ".concat((0,De.Uy)(.15)),position:"relative",width:"900px",textAlign:"center",md:{width:"600px"},sm:{width:"calc(100vw - 128px)"}},m.createElement(he.x,{padding:"56px",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"485px"},m.createElement(he.x,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},m.createElement(Pe.F1,{scale:"L",tag:"h3"},P),m.createElement(he.x,{maxWidth:"520px",marginTop:"20px"},m.createElement(Se.F,{color:"DARKER",scale:"L"},function(e,t,n,r,i,o){return r?function(e,t){return e?"Your email will be delivered to your newsletter subscribers and editors, but will not appear publicly on ".concat(t,"."):m.createElement(m.Fragment,null,"Your subscribers and editors should have it soon. It’ll also show up on ",t," readers’ homepages and Digest emails depending on their interests."," ",m.createElement(ve.r,{inline:!0,linkStyle:"OBVIOUS",href:"https://help.medium.com/hc/en-us/articles/115004682167-How-to-use-Newsletters"},"Learn more"))}(e,o):e?"Your unlisted story will not appear publicly on ".concat(o,", but you can still share it."):i?"You've chosen this story to be member-only. Anyone can see a short preview but only paying members can read the full story.":n?t?m.createElement(m.Fragment,null,"As a member of the Partner Program, you’ve chosen to make this story eligible to earn money. It will be part of ",o,"’s metered paywall.",m.createElement(Le,null)):m.createElement(m.Fragment,null,"You did not choose to make this story eligible to earn money. It will not be part of"," ",o,"’s metered paywall.",m.createElement(Le,null)):m.createElement(m.Fragment,null,"This story isn’t currently eligible to earn money. To make this story eligible, join the"," ",o," Partner Program."," ",m.createElement(ve.r,{inline:!0,linkStyle:"OBVIOUS",href:"https://medium.com/earn"},"Learn more."))}(v,E,b,s,null!=d&&d,S))),m.createElement(he.x,{paddingTop:"20px"},E&&!v&&c&&y&&m.createElement(Be,{url:(0,Q.Rk)((0,j.jVf)(i),{sk:y}),label:"Copy Friend Link"})),m.createElement(he.x,{borderBottom:"BASE_LIGHTER",width:"100%",margin:"20px 0"})),o&&c&&m.createElement(Ue,{post:i,isUnlisted:v,postPath:(0,j.jVf)(i)})),m.createElement(ye.P,{onClick:r,size:"LARGE"})))};!function(e){e.initial="initial",e.repub="repub"}(ke||(ke={}));var Ne=function(e){var t,n=e.post,r=m.useState(!1),i=u()(r,2),o=i[0],a=i[1],l=m.useCallback((function(){return a(!1)}),[a]),c=(0,p.I0)(),s=(0,Oe.Wd)("postPublishedType"),d=(0,B.g)(null===(t=n.collection)||void 0===t?void 0:t.id).viewerEdge;m.useEffect((function(){switch(s){case ke.initial:a(!0);break;case ke.repub:c((0,we.Dx)({duration:3e3,message:"Your changes have been published."}))}}),[s]);var g=m.useState(!1),f=u()(g,2),h=f[0],v=f[1];return h?m.createElement(pe.I,null,(function(e){return null!=e&&e.id&&(e.id===(n.creator&&n.creator.id)||n.collection&&null!=d&&d.isEditor)?m.createElement(me.AE,{ssr:!1,query:Me,variables:{postId:n.id}},(function(t){var n=t.loading,r=t.data,i=(r=void 0===r?{}:r).post;return n||!i||i.inResponseToPostResult?null:m.createElement(je,{isVisible:o,hide:l,post:i,viewerId:e.id})})):null})):(xe.V6.on("load",(function(){return v(!0)})),null)},Fe=(0,d.Ps)(Te()),He=n(49925),We=n(10103),Ve=n(59877);function Ge(){var e=i()(["\n  fragment PostScreenThemeProvider_post on Post {\n    collection {\n      ...CustomThemeProvider_publisher\n      ...auroraHooks_publisher\n    }\n    creator {\n      ...CustomThemeProvider_publisher\n      ...auroraHooks_publisher\n    }\n    customStyleSheet {\n      ...CustomThemeProvider_customStyleSheet\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Ge=function(){return e},e}var Ye=function(e){var t=e.children,n=e.post,r=n.collection||n.creator,i=(0,He.GT)(r),o=n.customStyleSheet;return i?m.createElement(We.G8,{customStyleSheet:o,publisher:r},t):m.createElement(We.G8,{customStyleSheet:null,publisher:r},m.createElement(Ve.r,null,t))},ze=(0,d.Ps)(Ge(),We.Kc,We.Ps,He.C5),$e=n(62182),Xe=n(50493),qe=n(15789),Qe=n(9482),Ke=n(61517),Je=n(50188),Ze=n(82712),et=n(55127),tt=n(56365),nt=n(6688),rt=function(e){var t=e.children,n=e.rule,r=(0,nt.I)(),i=n?r(n):"";return i?m.createElement("div",{className:i},t):m.createElement(m.Fragment,null,t)},it=n(85489),ot=n(74908),at=n(47552),lt=n(36511);function ct(){var e=i()(["\n  query TopicViewerEdge($topicId: ID!) {\n    topic(id: $topicId) {\n      ... on Topic {\n        id\n        viewerEdge {\n          id\n          isFollowing\n        }\n      }\n    }\n  }\n"]);return ct=function(){return e},e}var st=(0,d.Ps)(ct()),ut=n(32589),dt=n(19464),mt=n(80362),pt=n(37278);function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ft=m.createElement("path",{fill:"#fff",d:"M0 0h49v57H0z"}),ht=m.createElement("path",{d:"M45.95 17.53v-.04l-.05-1.55a5.32 5.32 0 0 0-5.04-5.17c-5.8-.32-10.3-2.2-14.13-5.89l-.03-.03a3.26 3.26 0 0 0-4.4 0l-.03.03c-3.84 3.7-8.33 5.57-14.13 5.89-2.79.15-5 2.42-5.04 5.18l-.05 1.54v.1c-.11 5.84-.25 13.12 2.21 19.73 1.36 3.63 3.41 6.79 6.1 9.38 3.07 2.96 7.09 5.3 11.94 6.98a3.74 3.74 0 0 0 2.4 0c4.85-1.68 8.86-4.03 11.93-6.98 2.69-2.6 4.74-5.76 6.1-9.39 2.47-6.63 2.33-13.92 2.22-19.78zm-5 18.77c-2.6 6.96-7.9 11.74-16.23 14.62a.67.67 0 0 1-.45 0c-8.32-2.87-13.63-7.65-16.23-14.61-2.27-6.1-2.14-12.78-2.03-18.67v-.03c.03-.5.04-1.04.05-1.62.02-1.22 1-2.23 2.24-2.3 3.29-.18 6.17-.81 8.83-1.92 2.64-1.1 5-2.67 7.19-4.77.1-.1.25-.1.36 0a23.11 23.11 0 0 0 7.2 4.77 26.27 26.27 0 0 0 8.82 1.92 2.36 2.36 0 0 1 2.24 2.3c0 .58.02 1.12.05 1.62.11 5.9.24 12.59-2.04 18.69z",fill:"#757575"}),vt=m.createElement("path",{d:"M24.5 17.76c-7.11 0-12.9 5.4-12.9 12.04 0 6.64 5.79 12.04 12.9 12.04s12.9-5.4 12.9-12.04c0-6.64-5.79-12.04-12.9-12.04zm0 21.25c-5.44 0-9.86-4.13-9.86-9.2 0-5.08 4.42-9.21 9.86-9.21 5.44 0 9.86 4.13 9.86 9.2 0 5.08-4.42 9.2-9.86 9.2z",fill:"#757575"}),Et=m.createElement("path",{d:"M28.08 25.1l-5.64 6.12-1.53-1.66c-.56-.6-1.46-.6-2.02 0-.55.6-.55 1.59 0 2.2l2.54 2.75c.28.3.65.45 1.01.45.37 0 .73-.15 1.01-.45l6.65-7.22c.55-.6.55-1.59 0-2.2-.56-.6-1.47-.6-2.02 0z",fill:"#757575"});const bt=function(e){return m.createElement("svg",gt({width:49,height:57,viewBox:"0 0 49 57",fill:"none"},e),ft,ht,vt,Et)};var yt=(0,p.$j)()((function(e){var t=e.dispatch,n=e.isVisible,r=e.hide,i="limitedStateInterstitialDialogPopover";return m.createElement(be.V,{isVisible:n,hide:r,withCloseButton:!1,customBackgroundColor:"rgba(255, 255, 255, 0.94)"},m.createElement(he.x,{display:"flex",justifyContent:"center",paddingTop:"100px"},m.createElement(he.x,{height:"550px",width:"900px",background:De.ix,borderRadius:"4px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",boxShadow:"0 2px 10px ".concat((0,De.Uy)(.15)),paddingBottom:"14px",md:{width:"600px",height:"auto",padding:"14px 8px"},sm:{width:"95vw !important",padding:"14px 8px"}},m.createElement(he.x,{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"},m.createElement(he.x,{paddingBottom:"24px"},m.createElement(bt,null)),m.createElement(he.x,{paddingBottom:"24px",paddingRight:"24px",paddingLeft:"24px"},m.createElement(pt.X6,{scale:"L"},"The following content was reported as a potential violation of Medium’s rules and is under investigation.")),m.createElement(he.x,{padding:"0 0 24px 0"},m.createElement(Ee.z,{buttonStyle:"BRAND",size:"REGULAR",onClick:function(){r(),t((0,we.Dx)({duration:"FOREVER",message:"",toastStyle:"LIMITED_STATE_BANNER"}))}},"I understand and want to proceed anyway"),m.createElement(dt.B,null,(function(e){var t=e.isVisible,n=e.toggle,r=e.hide;return m.createElement(mt.J,{ariaId:i,isVisible:t,hide:r,display:"block",customZIndex:800,popoverRenderFn:function(){return m.createElement(he.x,{padding:"15px 20px",width:"400px"},m.createElement(Se.F,{scale:"S"},"Anyone can publish on Medium, provided the content adheres to Medium’s rules and policies. When Medium is made aware of potential violations, the content is manually evaluated and appropriate action taken. Some features may be disabled while the content is under review."))},placement:"top",targetDistance:15},m.createElement(he.x,{paddingTop:"10px"},m.createElement(ve.r,{ariaControls:i,ariaExpanded:t?"true":"false",onClick:n},m.createElement("u",null,m.createElement(Se.F,{scale:"S"},"Why am I seeing this?")))))})))),m.createElement(he.x,{display:"flex",justifyContent:"center"},m.createElement(Se.F,{scale:"M"},"View our"," ",m.createElement(ve.r,{href:"https://medium.com/policy/medium-rules-30e5502c4eb4",linkStyle:"OBVIOUS",inline:!0},"Rules,")," ",m.createElement(ve.r,{href:"https://medium.com/policy/medium-terms-of-service-9db0094a1e0f",linkStyle:"OBVIOUS",inline:!0},"Terms of Service")," ","&"," ",m.createElement(ve.r,{href:"https://medium.com/policy/medium-partner-program-terms-fcfe9cf777b8",linkStyle:"OBVIOUS",inline:!0},"Partner Program Terms"))))))}));function St(){var e=i()(["\n  fragment LimitedStateInterstitial_post on Post {\n    creator {\n      id\n    }\n    isLimitedState\n  }\n"]);return St=function(){return e},e}var Pt=function(e){return function(){return{filter:e?"blur(10px)":"blur(0)"}}};function xt(e){var t=e.post,n=t.creator,r=t.isLimitedState,i=e.children,o=(0,T.H)().value,a=null==o?void 0:o.id,l=(0,nt.I)(),c=m.useState(!1),s=u()(c,2),d=s[0],p=s[1];return m.useEffect((function(){p(!0)}),[]),r&&(n&&n.id)!==a?m.createElement(dt.B,{initialVisibility:!0},(function(e){var t=e.isVisible,n=e.hide;return m.createElement(m.Fragment,null,m.createElement("div",{className:l(Pt(t))},i),d&&m.createElement(yt,{isVisible:t,hide:n}))})):i}var It=(0,d.Ps)(St()),wt=n(85714),Ot=n(51562),Dt=n(324),_t=n(37258),Tt=n(19608),At=n(27168),Ct=n(48881),Lt=n(59317),kt=n(30027),Rt=function(e){var t=e.children,n=e.onClose,r=m.useRef(null),i=m.useContext(g.u6).updateWatchedBounds;return m.createElement(dt.B,{initialVisibility:!0},(function(e){var o=e.isVisible,a=e.hide;return o&&m.createElement(he.x,{backgroundColor:"BASE_LIGHT",borderBottom:"BASE_LIGHTER",borderTop:"BASE_LIGHTER"},m.createElement(kt.P,null,m.createElement(he.x,{display:"flex",justifyContent:"space-between",paddingBottom:"20px",paddingTop:"20px"},t,m.createElement(ye.P,{onClick:function(){n&&n(),i("byline",r,{type:"header"}),a()},isPositionAbsolute:!1,size:"REGULAR"}))))}))},Mt=n(98281),Bt=n(95760),Ut=n(51512),jt=n(33572),Nt=n(81591),Ft=n(69332),Ht="alternate_user_top_banner",Wt=function(e){var t=e.userSocialLogins,n=(0,Lt.j)().openModal;return t.facebook||t.google||t.twitter?m.createElement(Tt.r,{userSocialLogins:t}):m.createElement(_t.o,{onSuccess:function(){return n({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:Ht})},userId:t.userId},(function(e){var t=e.handleSubmit;return m.createElement(Ee.z,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:t},"Send login link")}))},Vt=function(){var e=(0,T.H)().value,t=(0,lt.r)().viewerId,n=(0,p.I0)(),r=(0,Bt.Av)(),i=m.useState(!1),o=u()(i,2),a=o[0],l=o[1],c=m.useState("loading"),s=u()(c,2),d=s[0],g=s[1];return m.useEffect((function(){n((0,Ft.e6)(!0)),l(!0)}),[]),m.useEffect((function(){"rendered"===d&&n((0,Nt.T)(!0)),"not_eligible"===d&&n((0,Ft.e6)(!1))}),[d]),m.createElement(Ut.cW,{source:{susiEntry:Ht}},m.createElement(Ct.o,{postRenderCallback:function(e,n,i){g(n?"rendered":"not_eligible"),n&&(r.event("experiment.eligible",{experimentId:"358323e239a2"}),r.event("alternateUserBanner.viewed",{alternateUserSuggestionAccountType:(0,jt.S)(i),alternateUserSuggestionTargetUserId:i.userId,alternateUserSuggestionSourceUserId:t}))}},(function(n){var i,o=n.showSuggestedAccount,l=n.declineSuggestedAccount,c=n.userSocialLogins;return a&&o&&l&&c?m.createElement(Dt.N8,null,m.createElement(Rt,{onClose:function(){return r.event("alternateUserBanner.dismissed",{alternateUserSuggestionAccountType:(0,jt.S)(c),alternateUserSuggestionTargetUserId:c.userId,alternateUserSuggestionSourceUserId:t})}},m.createElement(he.x,{alignItems:"flex-start",display:"flex",flexDirection:"column",sm:{alignItems:"center"}},m.createElement(he.x,{alignItems:"center",display:"flex",marginBottom:"21px",sm:{flexDirection:"column",margin:"0 21px 21px",textAlign:"center"}},!e&&(null===(i=c.userAvatar)||void 0===i?void 0:i.imageId)&&m.createElement(he.x,{display:"flex",marginRight:"20px",sm:{marginBottom:"18px",marginRight:"0"}},m.createElement(Mt.Yt,{scale:"S",user:{__typename:"User",id:c.userId,name:c.userAvatar.name,username:c.userAvatar.username,imageId:c.userAvatar.imageId,mediumMemberAt:c.userAvatar.mediumMemberAt,customDomainState:null,hasSubdomain:!1}})),m.createElement(Ot.W,{featureString:"alternate-user-top-banner",target:"header"},m.createElement(Se.F,{color:"DARKER",scale:"M"},function(e,t){var n=t.isMember,r=t.redactedEmailAddress;return m.createElement(m.Fragment,null,e?"Switch":"Sign in"," to your ",n?"member ":"","account (",m.createElement("b",null,r),") for",n?" unlimited access":" your personalized experience",".")}(e,c)))),m.createElement(he.x,{alignItems:"center",display:"flex",sm:{flexDirection:"column"}},m.createElement(Wt,{userSocialLogins:c}),m.createElement(he.x,{margin:"0 12px",sm:{margin:"24px 0 0"}},m.createElement(At.G,{declineSuggestedAccount:l,isSocial:!!(c.facebook||c.google||c.twitter)})))))):m.createElement(m.Fragment,null)})))},Gt=n(87757),Yt=n.n(Gt),zt=n(48926),$t=n.n(zt),Xt=n(11348),qt=n(6522),Qt="signin_confirmation_banner",Kt=function(){var e=(0,Bt.Av)(),t=(0,Lt.j)().openModal,n=m.useState(!1),r=u()(n,2),i=r[0],o=r[1],a=m.useState(!1),l=u()(a,2),c=l[0],s=l[1],d=m.useState(!0),p=u()(d,2),g=p[0],f=p[1],h=(0,T.H)().value,v=(0,U.p9)((function(e){return e.session.xsrf})),E=(0,Oe.PM)(),b=(0,Ut.P7)(E||"").name;return m.useEffect((function(){return o(!0)}),[]),m.useEffect((function(){i&&h&&(e.event("experiment.eligible",{experimentId:"b4152480e71c"}),function(){var e=$t()(Yt().mark((function e(){var t;return Yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Xt.vA)(null==h?void 0:h.id,v);case 2:t=e.sent,f(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),(0,Xt.oy)(h.id,v))}),[i,h]),m.useEffect((function(){c&&e.event("signInConfirmationBanner.viewed",{})}),[c]),!i||!h||!b||"login"!==b||!h.createdAt||Date.now()-h.createdAt<=5*qt.uD||g?null:(c||s(!0),m.createElement(Ut.cW,{source:{susiEntry:Qt},extendSource:!0},m.createElement(Dt.N8,null,m.createElement(Rt,{onClose:function(){return e.event("signInConfirmationBanner.dismissed",{})}},m.createElement(he.x,{display:"flex",alignItems:"center"},m.createElement(he.x,{display:"none",marginRight:"20px",sm:{display:"flex"}},m.createElement(Mt.Yt,{scale:"S",user:h})),m.createElement(Se.F,{color:"DARKER",scale:"M"},m.createElement(Ot.W,{featureString:"confirm-sign-in-banner",target:"header",tag:"span"},"Welcome back. You are signed"," ",h.mediumMemberAt?"into your member account ":"in as ",m.createElement("b",null,h.email),"."," "),m.createElement(ve.r,{onClick:function(){e.event("signInConfirmationBanner.notYouClicked",{}),t({operation:"login",step:"SIGNIN_OPTIONS",susiEntry:Qt})},linkStyle:"OBVIOUS"},"Not you?")))))))},Jt=n(93874),Zt=n(66210),en=n(58491),tn=n(31517),nn=n(172);function rn(e){var t={__html:'<script type="application/json">'.concat(h()(e.json,{isJSON:!0}),"<\/script>")};return m.createElement("amp-analytics",{id:"medium-analytics",dangerouslySetInnerHTML:t})}var on=n(30389),an=n(27140),ln=n(65441);function cn(){var e=i()(["\n  fragment PostScreen_post on Post {\n    id\n    canonicalUrl\n    collection {\n      id\n      domain\n      googleAnalyticsId\n      slug\n      ...CollectionMetabar_collection\n      ...MetaHeader_publisher\n      ...auroraHooks_publisher\n    }\n    # please note that the postMeteringOptions are defined in the postHandler file\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n      validatedShareKey\n    }\n    creator {\n      customStyleSheet {\n        id\n        ...PostSidebar_customStyleSheet\n      }\n      ...SuspendedBannerLoader_user\n      ...MetaHeader_publisher\n      ...UserSubdomainFlow_user\n      ...auroraHooks_publisher\n      ...TruncatedPostCard_user\n    }\n    customStyleSheet {\n      id\n      postBody {\n        ...SupportedContainerStyles_styleNode\n      }\n      ...CustomBackgroundWrapper_customStyleSheet\n      ...MetaHeader_customStyleSheet\n      ...PostSidebar_customStyleSheet\n    }\n    firstPublishedAt\n    isLocked\n    isPublished\n    isShortform\n    layerCake\n    primaryTopic {\n      name\n      slug\n    }\n    title\n    isMarkedPaywallOnly\n    ...AddCollaborator_post\n    ...InteractivePostBody_post\n    ...LimitedStateInterstitial_post\n    ...MaybeRedirectToEditor_post\n    ...Metabar_post\n    ...Wall_post\n    ...PostBodyInserts_post\n    ...PostFooter_post\n    ...PostHeader_post\n    ...PostMetadata_post\n    ...PostPublishedDialog_prerequisite_post\n    ...PostReadTracker_post\n    ...PostScreenThemeProvider_post\n    ...PostScrollTracker_post\n    ...PostSidebar_post\n    ...SuspendedBannerLoader_post\n    ...buildBranchViewData_post\n    ...optimizelyData_post\n    ...TableOfContents_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return cn=function(){return e},e}function sn(){var e=i()(["\n  fragment PostScreen_meteringInfo on MeteringInfo {\n    __typename\n    postIds\n    maxUnlockCount\n    unlocksRemaining\n    ...PostHeader_meteringInfo\n    ...Wall_meteringInfo\n    ...buildBranchViewData_meteringInfo\n  }\n  ","\n  ","\n  ","\n"]);return sn=function(){return e},e}function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mn=function(){return null};function pn(e){var t,n,r,i,o,a,l,c,s,d=e.meteringInfo,f=e.post,h=f.id,v=f.isPublished,E=f.isLocked,P=f.isShortform,x=f.content,w=f.collection,O=f.canonicalUrl,A=(0,p.I0)(),C=(0,Bt.Av)(),L=(0,Oe.PM)(),M=(0,U.v9)((function(e){return e.config.authDomain})),N=(0,U.v9)((function(e){return e.navigation.currentHash})),H=(0,U.p9)((function(e){return e.config.isAmp})),G=(0,U.v9)((function(e){return e.navigation.referrer})),Y=(0,on.P)(),z=Y.inAppBrowser,$=Y.loading,X=(0,ge.T)(f.id),q=X.viewerEdge,Q=X.loading,K=(0,ut.P)(null===(t=f.creator)||void 0===t?void 0:t.id),J=K.viewerEdge,Z=K.loading,ee=(0,B.g)(null===(n=f.collection)||void 0===n?void 0:n.id),te=ee.viewerEdge,ne=ee.loading,re=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,_.useQuery)(st,{variables:{topicId:t},ssr:!1,skip:!t}),r=n.loading,i=n.error,o=n.data;return r?{loading:r}:i?{error:i}:{viewerEdge:null==o||null===(e=o.topic)||void 0===e?void 0:e.viewerEdge}}(null===(r=f.primaryTopic)||void 0===r?void 0:r.id),ie=re.viewerEdge,oe=re.loading,ae=Q||ne||Z||oe,le=m.useState((null==q?void 0:q.readingList)===Ie.sx.READING_LIST_QUEUE||(null==q?void 0:q.readingList)===Ie.sx.READING_LIST_ARCHIVE),ce=u()(le,2),se=ce[0],de=ce[1],me=m.useRef(null),pe=(0,T.H)().value;H&&(pe=void 0);var fe=!!pe,he=w||{},ve=he.id,Ee=he.slug,be=he.googleAnalyticsId,ye=x||{},Se=ye.isLockedPreviewOnly,Pe=ye.validatedShareKey,xe=be?[be]:null;(0,y.t)({ids:xe,isAmp:H}),(0,Zt.V)(me,f),(0,en.t)(fe,me,f),function(e){var t=(0,T.H)().value,n=(0,_.useMutation)(k,{variables:{postId:e.id}}),r=u()(n,2),i=r[0],o=r[1].called;m.useEffect((function(){e.isPublished||null==t||!t.id||o||i()}),[t])}(f);var we=(0,He.GT)(w||f.creator),De=P&&we,_e=(0,an.D)(we),Te=(0,Ut.P7)(L||"").dimension,Ae=!("digest.reader"!==(void 0===Te?"":Te))&&!Se&&fe&&!(null!=J&&J.isUser)&&!(null!=J&&J.isFollowing)&&((null==J?void 0:J.readPostsCount)||0)>=3,Ce=m.useState(Ae),Le=u()(Ce,2),ke=Le[0],Re=Le[1];m.useEffect((function(){Re(Ae)}),[]);var Me=(0,W.Dj)(f,ke),Be=(0,lt.r)(),Ue=Be.loading,je=Be.viewerId;m.useEffect((function(){if(!Ue&&je&&!$&&!ae){if(v){fe||(f.isLocked?(0,Xt.yB)():(0,Xt.B8)());var e=(0,S.RD)({inAppBrowser:z,post:f,meteringInfo:d,referrer:G,referrerSource:L,viewer:pe,currentUserId:je,creatorViewerEdge:J,collectionViewerEdge:te,topicViewerEdge:ie});w&&w.domain&&(e.data.$canonical_url=(0,j.o2w)(M,f.id));var t=pe&&pe.name?(0,jt.J)(pe.name):void 0;(0,R.KQ)({post:f},t),(0,S.Pu)(e),A((0,nn.aj)(e)),A((0,nn.QZ)()),C.event("post.clientViewed",{postId:h,collectionId:ve,collectionSlug:Ee,context:1,isFriendLink:!!Pe})}else C.event("post.draftViewed",{postId:h});return fe||(0,Je.kD)(h),function(){A((0,nn.Uo)())}}}),[h,v,Ue,je,$,z,pe,ae]);var Fe=(0,Oe.Wd)("readmore");m.useEffect((function(){var e;if(Fe){var t=document.getElementById(ln.W);if(t){var n=window.matchMedia&&(null===(e=window.matchMedia("(prefers-reduced-motion: reduce)"))||void 0===e?void 0:e.matches);setTimeout((function(){var e=Math.max(t.offsetTop-window.innerHeight/2,0);window.scrollY<=e&&window.scrollTo({top:e,behavior:n?void 0:"smooth"})}))}}}),[Fe]),_e!==we&&A((0,tn.t)(we));var We,Ve,Ge=E?{className:"meteredContent"}:{};if(N){var ze=N.split("-");We=ze[0],Ve=ze[1]}var Xe,Ze=w&&f.customStyleSheet&&null!=f&&null!==(i=f.creator)&&void 0!==i&&null!==(o=i.customStyleSheet)&&void 0!==o&&o.blogroll?dn(dn({},f.customStyleSheet),{},{blogroll:null==f||null===(a=f.creator)||void 0===a||null===(l=a.customStyleSheet)||void 0===l?void 0:l.blogroll}):f.customStyleSheet;return m.createElement(m.Fragment,null,m.createElement(F,{post:f},m.createElement(ue,{isAmp:H,post:f}),(null===(c=pe)||void 0===c?void 0:c.id)===(null===(s=f.creator)||void 0===s?void 0:s.id)?m.createElement(wt.Lv,{post:f,user:f.creator}):m.createElement(at.b,{name:"can_view_suspended_content",placeholder:mn},(function(e){return e?m.createElement(wt.Lv,{post:f,user:f.creator}):null})),m.createElement(Ye,{post:f},m.createElement(tt.f,{customStyleSheet:f.customStyleSheet},m.createElement(gn,{post:f}),m.createElement(ot.k,{post:f},m.createElement(rt,{rule:(Xe=f.customStyleSheet,(0,it.fl)(null==Xe?void 0:Xe.postBody))},m.createElement(g.Am,null,m.createElement(Qe.Q.Provider,{value:{isFirstLoadAndInReadingList:se,setIsFirstLoadAndInReadingList:de}},m.createElement(Vt,null),m.createElement(Kt,null),m.createElement("article",Ge,m.createElement(V.mV,{post:f,meteringInfo:d}),m.createElement(xt,{post:f},m.createElement(qe.bl,{activeGrafId:We,activeNoteId:Ve,isAuroraPostPageEnabled:we,post:f,postBodyInserts:Me,ref:me}))),!Se&&!!v&&!De&&m.createElement($e.PostSidebar,{customStyleSheet:Ze,post:f,extraWide:!0}),m.createElement(D.cu,{post:f,meteringInfo:d}),!Se&&m.createElement(Ke.zX,{post:f}))))),m.createElement(Ne,{post:f}),!!v&&m.createElement(I.T,{slimFooter:we}))),H&&m.createElement(m.Fragment,null,m.createElement(rn,{json:{requests:{base:(0,j.vuB)(M),pageview:(0,j.CXS)(),scrollPing:(0,j.y4K)()},vars:{postId:h,collectionId:ve,canonicalUrl:O,referrer:G},triggers:{defaultPageview:{on:"visible",request:"pageview"},scrollDepths:{on:"scroll",scrollSpec:{verticalBoundaries:[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100]},request:"scrollPing"}},transport:{beacon:!1,xhrpost:!1,image:!0}}}),m.createElement(b,{collectionGoogleAnalyticsId:be}))),!!f.creator&&!f.collection&&m.createElement(Jt.h,{user:f.creator,refreshOnComplete:!0}))}var gn=function(e){var t,n,r=e.post,i=r.collection,o=r.content,l=i||r.creator,c=(0,He.GT)(l),s=(0,U.p9)((function(e){return e.config.isAmp})),u=o.bodyModel&&o.bodyModel.paragraphs[0],d=u&&u.type===Ie.NJ.IMG&&u.layout===Ie.ms.FULL_WIDTH;if(l&&c)return m.createElement(he.x,{marginBottom:d?"0":"36px",sm:{marginBottom:d?"0":"20px"}},m.createElement(Ze.Go,{publisher:l,customStyleSheet:r.customStyleSheet,post:r,forceSmall:!0}),m.createElement(et.z,{headerScale:null===(t=r.customStyleSheet)||void 0===t||null===(n=t.header)||void 0===n?void 0:n.headerScale,post:r,publisher:l}));var p={behavior:O.W.Aggressive,isAmp:s,isFixed:!1,post:r};if(i)return m.createElement(P.NL,a()({},p,{collection:i}));var g=r.layerCake,f=r.primaryTopic,h=g&&(1===g||2===g||3===g),v=h?f:null;return m.createElement(w.kw,a()({},p,{isMonogramOnly:!h,marginBottom:0,marginBottomSm:0,topic:v}))},fn=(0,d.Ps)(sn(),V.Xc,D.Y6,S.PI),hn=(0,d.Ps)(cn(),L,P.JE,tt.w,qe.Uw,It,H,w.v7,Ze.aU,Ze.Mv,$e.PostSidebar_customStyleSheet,D.rU,W.Cs,Ke.F9,V.Z3,de,Fe,en.W,ze,Zt.k,$e.PostSidebar_post,it._3,wt.QX,wt.v,Jt.k,He.C5,S.ir,R.ne,Xe.tA,x.Dc)},71794:(e,t,n)=>{"use strict";n.d(t,{j7:()=>d,OO:()=>m,iI:()=>p,m3:()=>g});var r=n(28655),i=n.n(r),o=n(71439),a=n(14391),l=n(22744),c=n(50993);function s(){var e=i()(["\n  fragment shortformPostMetaDescription_post on Post {\n    id\n    metaDescription\n    seoDescription\n    shortformType\n    title\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=i()(["\n  fragment postMetaDescription_post on Post {\n    id\n    title\n    seoDescription\n    metaDescription\n    creator {\n      id\n      name\n    }\n    collection {\n      id\n      name\n    }\n    previewContent {\n      subtitle\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return u=function(){return e},e}var d=function(e){return function(e){var t=e.metaDescription,n=e.seoDescription,r=e.title||"";if(n)return n;if(t)return t;var i=function(e){var t=(0,l.r4)(e,250);return t&&(0,c.N8)(t,200)}(e);if(i.length>150)return i;var o=e.previewContent&&e.previewContent.subtitle||"";if(o.length>140)return o;o.length>0&&(o+=".");var a=(r.length?r+". ":"")+o;if(a.length>140)return a;var s="“".concat(r,"” is published");return e.creator&&e.creator.name&&(s+=" by ".concat(e.creator.name)),e.collection&&e.collection.name&&(s+=" in ".concat(e.collection.name)),"".concat(o," ").concat(s,".")}(e).trim()},m=function(e,t){var n=e.metaDescription,r=e.seoDescription,i=e.shortformType,o=i===a.po.SHORTFORM_TYPE_NOTE||!i;if(r)return r;if(n)return n;if(o&&t){var s=(0,l.r4)(e,350,0);return(0,c.N8)(s,300)}return""},p=(0,o.Ps)(u(),l.bh),g=(0,o.Ps)(s(),l.bh)},22744:(e,t,n)=>{"use strict";n.d(t,{r4:()=>D,bh:()=>_,yB:()=>T,dm:()=>A,lO:()=>k,Bg:()=>R,_t:()=>M,bq:()=>B,oS:()=>U,Pz:()=>j,c_:()=>N,HF:()=>F});var r=n(59713),i=n.n(r),o=n(28655),a=n.n(o),l=n(71439),c=n(90584),s=n(4743),u=n(14391),d=n(398),m=n(50993);function p(){var e=a()(["\n  fragment shouldIndexPost_post on Post {\n    id\n    firstPublishedAt\n    isLimitedState\n    isShortform\n    shortformType\n    visibility\n    curationStatus\n    creator {\n      name\n      atsQualifiedAt\n      customDomainState {\n        live {\n          status\n          isSubdomain\n        }\n      }\n    }\n    collection {\n      customDomainState {\n        live {\n          status\n          isSubdomain\n        }\n      }\n      creator {\n        atsQualifiedAt\n      }\n      ptsQualifiedAt\n    }\n    noIndex\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return p=function(){return e},e}function g(){var e=a()(["\n  fragment shortformPostTitle_post on Post {\n    id\n    title\n    seoTitle\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      ...maybeAppendProductName_collection\n    }\n  }\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}function f(){var e=a()(["\n  fragment getTitleForPost_post on Post {\n    id\n    title\n    ...postTitle_post\n    ...getTitleDetails_post\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(){var e=a()(["\n  fragment postTitle_post on Post {\n    id\n    title\n    seoTitle\n    firstPublishedAt\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      id\n      name\n      domain\n      ...maybeAppendProductName_collection\n    }\n    creator {\n      name\n    }\n    previewContent {\n      subtitle\n    }\n  }\n  ","\n  ","\n  ","\n"]);return E=function(){return e},e}function b(){var e=a()(["\n  fragment maybeAppendProductName_collection on Collection {\n    id\n    domain\n  }\n"]);return b=function(){return e},e}function y(){var e=a()(["\n  fragment getTitleDetails_post on Post {\n    id\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        ...GetTitleIndexMap_bodyModel\n      }\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}function S(){var e=a()(["\n  fragment getPostContentAsString_post on Post {\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          text\n          type\n          mixtapeMetadata {\n            href\n          }\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}function P(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(){var e=a()(["\n  fragment appendPostContext_post on Post {\n    id\n    sequence {\n      title\n    }\n    collection {\n      name\n    }\n    creator {\n      name\n    }\n  }\n"]);return I=function(){return e},e}function w(e,t){var n,r,i;return null!==(n=t.sequence)&&void 0!==n&&n.title?e+=" - ".concat(t.sequence.title):null!==(r=t.collection)&&void 0!==r&&r.name?e+=" - ".concat(t.collection.name):null!==(i=t.creator)&&void 0!==i&&i.name&&(e+=" - ".concat(t.creator.name)),e}var O=(0,l.Ps)(I());function D(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeMixtapeHref:!1},l=a.includeMixtapeHref,c=(null===(t=e.content)||void 0===t||null===(n=t.bodyModel)||void 0===n?void 0:n.paragraphs)||[],s="",u=P(c);try{for(u.s();!(r=u.n()).done;){var d=r.value,m=d.mixtapeMetadata,p=d.text,g=d.type;if(l&&null!=m&&m.href?s+=s?" ".concat(m.href):m.href:"P"===g&&p&&p.length>o&&(s+=s?" ".concat(p):p),s.length>i)break}}catch(e){u.e(e)}finally{u.f()}return s}var _=(0,l.Ps)(S());function T(e){var t=!1,n="";if(e.content&&e.content.bodyModel&&e.content.bodyModel.paragraphs){var r=e.content.bodyModel.paragraphs,i=(0,s.LI)(r).titleIndex;"number"==typeof i&&(n=r[i].text||"",t=!0)}return{hasTitleGraf:t,latestTitle:n}}var A=(0,l.Ps)(y(),_,s.k);function C(e,t,n){return null!=n&&n.domain?e:"".concat(e," - ").concat(t)}var L=(0,l.Ps)(b());function k(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.seoTitle,a=e.title||"",l=(null===(n=e.previewContent)||void 0===n?void 0:n.subtitle)||"";if(o)return(0,d.p)(o,e.collection&&e.collection.name,t);if(!i)return a.length>50?a:a=C(a=w(a,e),t,e.collection);a.length<33&&l&&(l=(0,m.N8)(l,40),a+=". ".concat(l)),null!==(r=e.creator)&&void 0!==r&&r.name&&(a+=" | by ".concat(e.creator.name));var s="",u=Date.now()-5184e6;e.firstPublishedAt>=u&&(s=" | ".concat((0,c.Z)(e.firstPublishedAt,"LLL, yyyy")));var p=e.collection;return p?p.domain?a+="".concat(s," | ").concat(p.name):a+=" | ".concat(p.name).concat(s," | ").concat(t):a+="".concat(s," | ").concat(t),a}var R=(0,l.Ps)(E(),_,O,L);function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T(e),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.title||"",o=n.latestTitle||i,a=v(v({},e),{},{title:o});return k(a,t,r).trim()}var B=(0,l.Ps)(f(),R,A);function U(e,t,n){var r=e.seoTitle,i=e.title||"";return r?(0,d.p)(r,e.collection&&e.collection.name,t):i=C(i=w(i=function(e,t,n){var r=t.shortformType,i=r===u.po.SHORTFORM_TYPE_NOTE||!r;return n||(i?e=D(t,250,0):r===u.po.SHORTFORM_TYPE_LINK&&(e=D(t,250,0,{includeMixtapeHref:!0}))),(0,m.N8)(e,200)}(i,e,n),e),t,e.collection)}var j=(0,l.Ps)(g(),_,O,L);function N(e){var t,n,r,i,o=e.noIndex,a=e.collection,l=e.curationStatus,c=e.firstPublishedAt,s=e.isLimitedState,d=e.isShortform,m=e.shortformType,p=e.visibility,g=m===u.po.SHORTFORM_TYPE_NOTE||!m;if(o)return!1;if(!c)return!1;if("PUBLIC"!==p&&"LOCKED"!==p)return!1;if(s)return!1;if(d)if(g){if(D(e,10,0).length<=10)return!1}else if(0===D(e,10,0).length)return!1;if((null===(t=e.creator)||void 0===t?void 0:t.atsQualifiedAt)>0||a&&a.ptsQualifiedAt>0)return!0;if(l&&(l===u.Xg.CURATION_STATUS_DISTRIBUTED||l===u.Xg.CURATION_STATUS_DISTRIBUTED_AND_DISABLED))return!0;var f=["DELETED","FAILED","UNSPECIFIED"],h=null==a||null===(n=a.customDomainState)||void 0===n?void 0:n.live,v=null===(r=e.creator)||void 0===r||null===(i=r.customDomainState)||void 0===i?void 0:i.live;return!((!h||h.isSubdomain||f.includes(h.status))&&(!v||v.isSubdomain||f.includes(v.status)))}var F=(0,l.Ps)(p(),_)},398:(e,t,n)=>{"use strict";n.d(t,{N:()=>r,p:()=>i});var r=function(e){return e||"Untitled story"},i=function(e,t,n){return t?"".concat(e," | ").concat(t):n?"".concat(e," | ").concat(n):e}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/450.954bda60.chunk.js.map